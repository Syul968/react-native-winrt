parameters:
  buildLogDirectory: $(Build.BinariesDirectory)\$(BuildPlatform)\$(BuildConfiguration)\BuildLogs

steps:
  - task: CmdLine@2
    displayName: dir CrashDumps
    inputs:
      script: dir $(Build.StagingDirectory)\FailureLog.txt /s

  - task: PublishBuildArtifacts@1
    displayName: Upload failure log
    condition:  succeededOrFailed()
    inputs:
      pathtoPublish: '${{ parameters.buildLogDirectory }}'
      artifactName: 'Failure logs - $(Agent.JobName)-$(System.JobAttempt)'